<!DOCTYPE html>
<html lang="es">
{% load static %}

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}Reservaciones A&N{% endblock %}</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="//unpkg.com/alpinejs" defer></script>

</head>

<body class="bg-gray-50 text-gray-900 {% block body_class %}{% endblock %}">

  {% block navbar %}
  <!-- ========== NAVBAR NUEVO ========== -->
  <div class="bg-white">
    <header class="relative bg-white">
      <p class="flex h-10 items-center justify-center bg-indigo-600 px-4 text-sm font-medium text-white sm:px-6 lg:px-8">
        Primer reserva con 10% de descuento ‚Äî c√≥digo PONGAME10
      </p>

      
      <!-- ========== NAVBAR AJUSTADO ========== -->
      <nav class="bg-white border-b border-gray-200">
        <div class="relative flex items-center h-16 px-4 sm:px-6 lg:px-8 w-full max-w-full mx-auto">

          <!-- IZQUIERDA: Logo + Enlaces -->
          <div class="flex items-center space-x-6">
            <a href="{% url 'inicio' %}">
              <img src="https://tailwindcss.com/plus-assets/img/logos/mark.svg?color=indigo&shade=600"
                   alt="Logo"
                   class="h-12 w-auto" />
            </a>

            <a href="{% url 'lista_salones' %}?default_categoria=reuniones"
   class="text-gray-800 text-base font-medium hover:text-gray-900">
   Reuniones
</a>

<a href="{% url 'lista_salones' %}?default_categoria=expos"
   class="text-gray-800 text-base font-medium hover:text-gray-900">
   Expos
</a>

<a href="{% url 'lista_salones' %}?default_categoria=fiestas"
   class="text-gray-800 text-base font-medium hover:text-gray-900">
   Fiestas
</a>

          </div>

          <!-- üî• SEARCHBAR CENTRADO PERFECTAMENTE -->
          <div class="absolute left-1/2 -translate-x-1/2 w-full max-w-md">
            <input type="text" placeholder="Buscar..."
              class="w-full border border-gray-300 rounded-full px-4 py-2
                     focus:outline-none focus:ring-2 focus:ring-indigo-500" />
          </div>

          <!-- CONTENEDOR DERECHO FIJO -->
          <div class="flex items-center ml-auto space-x-6">

            {% if not request.user.is_authenticated %}
            <!-- LOGIN / REGISTER -->
            <div class="flex items-center space-x-2">
              <a href="{% url 'login' %}" class="text-gray-800 text-base font-medium hover:text-gray-900 p-2">
                Iniciar sesi√≥n
              </a>
              <span class="h-6 w-px bg-gray-300"></span>
              <a href="{% url 'registro' %}" class="text-gray-800 text-base font-medium hover:text-gray-900 p-2">
                Crear cuenta
              </a>
            </div>
            {% else %}
            <!-- ICONOS USUARIO / RESERVACIONES -->
            <div x-data="{ open: false }" class="relative">
              <button @click="open = !open" class="text-gray-800 hover:text-gray-900 p-2 flex items-center">
                <svg class="w-7 h-7 text-gray-800" fill="none" viewBox="0 0 24 24">
                  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0 0a8.949 8.949 0 0 0 4.951-1.488A3.987 3.987 0 0 0 13 16h-2a3.987 3.987 0 0 0-3.951 3.512A8.948 8.948 0 0 0 12 21Zm3-11a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/>
                </svg>
              </button>

              <div x-cloak x-show="open" x-transition @click.away="open = false"
     class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-50">
  <a href="{% url 'mi_perfil' %}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Mi cuenta</a>
  <a href="{% url 'mis_favoritos' %}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Mis favoritos</a>
  <a href="{% url 'help' %}" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Ayuda</a>
  {% if user.is_staff %}
  <a href="/admin/" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Modo Admin</a>
  {% endif %}
  <form method="post" action="{% url 'logout' %}">
    {% csrf_token %}
    <button type="submit" class="w-full text-left px-4 py-2 text-red-600 hover:bg-red-100">Cerrar sesi√≥n</button>
  </form>
</div>

            </div>

            <div x-data="{ open: false }" class="relative">
              <button @click="open = !open" class="text-gray-800 hover:text-gray-900 p-2 flex items-center space-x-1 relative">
                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    d="M4 10h16M8 14h8m-4-7V4M7 7V4m10 3V4M5 20h14a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Z" />
                </svg>
                <span class="text-gray-800 font-medium">{{ proximas_reservaciones|length }}</span>
              </button>

              <div x-cloak x-show="open" x-transition @click.away="open = false"
                   class="absolute right-0 mt-2 w-72 bg-white rounded-xl shadow-lg py-3 z-50">
                <div class="px-4 pb-2">
                  <p class="text-sm font-semibold text-gray-600">Tus reservaciones pr√≥ximas</p>
                  <div class="border-t border-gray-200 mt-2"></div>
                </div>

                {% if proximas_reservaciones|length == 0 %}
                <p class="px-4 py-3 text-gray-500 text-sm">No tienes reservaciones pr√≥ximas.</p>
                {% else %}
                {% for r in proximas_reservaciones|dictsort:"fecha_reserva"|slice:":3" %}
                <a href="{% url 'mis_reservaciones' %}" class="block px-4 py-2 hover:bg-gray-100 flow-root">
                  <div class="flex flex-col">
                    <span class="font-medium text-gray-800">{{ r.salon.nombre }}</span>
                    <span class="text-sm text-gray-500">{{ r.fecha_reserva }}</span>
                  </div>
                </a>
                {% endfor %}

                {% if proximas_reservaciones|length > 3 %}
                <a href="{% url 'mis_reservaciones' %}"
                   class="block text-center px-4 py-2 mt-2 text-indigo-600 font-medium hover:bg-indigo-50">Ver m√°s</a>
                {% endif %}
                {% endif %}
              </div>
            </div>

            {% endif %}

          </div> <!-- FIN CONTENEDOR DERECHO FIJO -->

        </div>
      </nav>
      {% endblock %}

    </header>
  </div>

  <!-- ========== BLOQUE DE CONTENIDO ========== -->
  <main class="pt-0">
    {% block content %}{% endblock %}
  </main>

  <!-- AlpineJS (ya cargado arriba; esta l√≠nea es segura) -->
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

  
  
{% block footer %}
  {% include "theme/footer.html" %}
{% endblock %}



</body>
</html>
  